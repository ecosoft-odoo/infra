version: "2"
services:
    postgres:
        image: postgres:12.2
        container_name: postgres
        restart: always
        ports: 
            - "5432:5432"
        environment: 
            - POSTGRES_DB=postgres
            - POSTGRES_USER=odoo
            - POSTGRES_PASSWORD=0d00pwd
            - PGDATA=/var/lib/postgresql/data/pgdata
        volumes:
            - /myproject/postgresql/data:/var/lib/postgresql/data
    odoo:
        image: odoo:13.0
        container_name: odoo
        restart: always
        ports: 
            - "8069:8069"
            - "8072:8072"
        environment: 
            - HOST=postgres
            - PORT=5432
            - USER=odoo
            - PASSWORD=0d00pwd
        volumes: 
            - /myproject/odoo/addons:/mnt/extra-addons
            - /myproject/odoo/config:/etc/odoo
            - /myproject/odoo/log:/var/log/odoo
            - /myproject/odoo/data:/var/lib/odoo
        depends_on:
            - postgres
    nginx:
        image: nginx
        container_name: nginx
        restart: always
        ports: 
            - "80:80"
        environment:
            - NGINX_HOST=127.0.0.1
            - NGINX_PORT=80
        volumes:
            - /myproject/nginx/config:/etc/nginx/conf.d
            - /myproject/nginx/log:/var/log/nginx
